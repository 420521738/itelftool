<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/font-awesome.min.css">
	<!-- Ionicons 2.0.1-->
	<link rel="stylesheet" href="/static/ionicons/css/ionicons.min.css">
	<!-- Theme style -->
	<link rel="stylesheet" href="/static/dist/css/AdminLTE.min.css">
	<link rel="stylesheet" href="/static/dist/css/skins/skin-yellow-light.css">
	<link rel="stylesheet" href="/static/css/loading.css">
</head>
<body>
<div class="content-wrapper">


    <!-- Main content -->

    <section class="content">

<div id="dialog">
        <div class="box box-info">
            <!-- /.box-header -->
            <!-- form start -->
            <form class="form-horizontal" action="{% url 'save' %}" method="POST">
                      {% csrf_token %}
                <div class="box-body">
                <div class="form-group">
                  <label for="navi_name" class="col-sm-2 control-label">名称</label>

                  <div class="col-sm-10">
                    <input type="text" class="form-control" name="name" value="{{ obj.name }}">
                  </div>
                </div>
                <div class="form-group">
                  <label for="navi_desc" class="col-sm-2 control-label">描述</label>

                  <div class="col-sm-10">
                    <input type="text" class="form-control" name="desc" value="{{ obj.description }}">
                  </div>
                </div>
                <div class="form-group">
                  <label for="navi_url" class="col-sm-2 control-label">URL</label>

                  <div class="col-sm-10">
                    <input type="text" class="form-control" name="url" value="{{ obj.url }}">
                  </div>
                </div>
                <input type="hidden" name="id" value="{{ obj.id }}">
              </div>
              <!-- /.box-body -->
              <div class="box-footer">
                <button type="submit" class="btn btn-info pull-right">保存</button>
              </div>
              <!-- /.box-footer -->
            </form>
</div>
    </div>

    </section>

  </div>
{#回传参数至父层#}
<script type="text/javascript">
		//parent.layer.getFrameIndex(window.name)获取窗口索引
        var index = parent.layer.getFrameIndex(window.name);
        //判断save函数传回来的status值，如果保存成功，传回来的status就是1，不成功就是2
        var success = {{ status }};
        if ( success == '1' ) {
        	//如果保存成功，那么设置id为handle_status的属性的值为1（manage.html页面中）
            parent.$("#handle_status").val('1');
              //关闭弹出的子页面窗口
              parent.layer.close(index);
        } else if( success == '2' ) {
        	//如果保存成功，那么设置id为handle_status的属性的值为2（manage.html页面中）
            parent.$("#handle_status").val('2');
            //关闭弹出的子页面窗口
            parent.layer.close(index);
        }
</script>
</body>
</html>